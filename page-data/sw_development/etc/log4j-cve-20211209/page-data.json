{"componentChunkName":"component---src-templates-post-template-js","path":"/sw_development/etc/log4j-cve-20211209/","result":{"data":{"site":{"siteMetadata":{"title":"Louis","author":"Louis"}},"markdownRemark":{"id":"433efbc8-2f4f-5c46-b749-62a4a50df485","excerpt":"2021년 12월 9일 log4j2의 보안 취약점 제로데이가 발생했다.\nlog4j2는 자바 언어로 작성된 로깅 라이브러리이고 많은 시스템 및 서버 소프트웨어에서 사용되고 있다. 이번 취약점은 RCE(Remote Code Execution)가 가능한 위험도가 높은 취약점이라 빠른 보안 업데이트가 필요했다.","html":"<p>2021년 12월 9일 log4j2의 보안 취약점 제로데이가 발생했다.\nlog4j2는 자바 언어로 작성된 로깅 라이브러리이고 많은 시스템 및 서버 소프트웨어에서 사용되고 있다. 이번 취약점은 RCE(Remote Code Execution)가 가능한 위험도가 높은 취약점이라 빠른 보안 업데이트가 필요했다.</p>\n<!-- more -->\n<h1>취약점 내용</h1>\n<hr>\n<h2>개요</h2>\n<p>Log4j2 REC Vulnerability가 Alibaba Cloud Security Team에 의해 2021년 12월 9일 알려졌다. 12월 10일에 패치 버전(Apache Log4j2 2.15.0-rc1)이 바로 나왔지만 취약점이 완전히 해결되지 않았다.\nCVE-2021-44228 취약점 이 후 연계된 Log4j2 취약점(CVE-2021-44832, CVE-2021-45046, CVE-2021-45105)들이 추가로 발견되었고 해결되었다.</p>\n<h2>문제점</h2>\n<p>Log4j2 라이브러리(log4j-core jar)가 설정, 로그 메세지, 파라미터 등에 JNDI(LDAP) 주소가 입력되었을 때 룩업을 시킨다는 문제가 발견되었다.\n이것이 왜 문제냐면 JNDI 룩업(lookup)이 디렉토리 서비스의 객체를 로드하는 기능이기 때문이다.\n즉, JNDI 주소가 파라미터로 전달되면 실행이 된다는 이야기이고 주소가 악의적인 외부 코드를 가리키고 있다면 외부 코드가 서버에서 동작하는 상황이 발생하게 된다.</p>\n<h2>취약점 목록</h2>\n<ul>\n<li><a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44228\">CVE-2021-44228</a></li>\n<li><a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44832\">CVE-2021-44832</a></li>\n<li><a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-45046\">CVE-2021-45046</a></li>\n<li><a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-45046\">CVE-2021-45046</a></li>\n</ul>\n<h2>취약점 해결 버전</h2>\n<p>언급된 취약점들이 모두 해소된 버전은 <code class=\"language-text\">Log4j 2.17.1</code> 이상의 버전이다.</p>\n<h1>스프링 Log4j 라이브러리 변경하기</h1>\n<hr>\n<p>스프링 v2.5.8, v2.6.2 릴리즈는 Log4j 2.17.0 버전을 포함하고 있다. 스프링 v2.6.7에서는 Log4j 2.17.2 버전을 포함하고 있는 것을 확인했다.\n스프링의 spring-boot-starter-logging은 기본적으로 log4j-to-slf4j와 log4j-api를 포함하고 이 취약점에 해당하지는 않는다. 취약점은 오직 log4j-core에서 발생한다.\n<code class=\"language-text\">만일 스프링 기본을 log4j2로 변경해서 사용하고 있고 문제의 라이브러리가 포함되어 있다면 수정이 필요하다.</code></p>\n<h2>스프링 log4j 버전 변경</h2>\n<ul>\n<li>gradle 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\next['log4j2.version'] = '2.17.1'\n...</code></pre></div>\n<ul>\n<li>dependency 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">./gradlew dependencyInsight --dependency log4j</code></pre></div>\n<h1>참고</h1>\n<hr>\n<ul>\n<li><a href=\"https://www.alibabacloud.com/notice/log4j2\">https://www.alibabacloud.com/notice/log4j2</a></li>\n<li><a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44228\">https://nvd.nist.gov/vuln/detail/CVE-2021-44228</a></li>\n<li><a href=\"https://security.googleblog.com/2021/12/understanding-impact-of-apache-log4j.html\">https://security.googleblog.com/2021/12/understanding-impact-of-apache-log4j.html</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=ziZnU3t-DRM\">https://www.youtube.com/watch?v=ziZnU3t-DRM</a></li>\n<li><a href=\"https://medium.com/r3d-buck3t/things-i-learned-this-week-about-log4jshell-vulnerability-c4199e7d194b\">https://medium.com/r3d-buck3t/things-i-learned-this-week-about-log4jshell-vulnerability-c4199e7d194b</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=oC2PZB5D3Ys\">https://www.youtube.com/watch?v=oC2PZB5D3Ys</a></li>\n<li><a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\">https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot</a></li>\n</ul>","fields":{"slug":"/sw_development/etc/log4j-cve-20211209/"},"frontmatter":{"title":"Log4jShell RCE Vulnerability ( CVE-2021-44228 )","searchTexts":["log4j2 취약점 경고","log4j2 vulnerability","log4j2 보안 취약점 대응","CVE-2021-44228","CVE-2021-44832","CVE-2021-45046","CVE-2021-45105"],"category":"sw development","subCategory":"etc","tags":["Security"],"created":"Dec 11, 2021","updated":"Dec 10, 2022"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%82%B4%EC%9A%A9\">취약점 내용</a></p>\n<ul>\n<li><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n<li><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%AA%A9%EB%A1%9D\">취약점 목록</a></li>\n<li><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90-%ED%95%B4%EA%B2%B0-%EB%B2%84%EC%A0%84\">취약점 해결 버전</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-log4j-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\">스프링 Log4j 라이브러리 변경하기</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-log4j-%EB%B2%84%EC%A0%84-%EB%B3%80%EA%B2%BD\">스프링 log4j 버전 변경</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></p>\n</li>\n</ul>"}},"pageContext":{"slug":"/sw_development/etc/log4j-cve-20211209/","prev":{"fields":{"slug":"/sw_development/etc/vulnerability-zero-day/"},"frontmatter":{"title":"제로데이(Zero-day, 0-day)","tags":["Security"],"category":"sw development","subCategory":"etc"}},"next":{"fields":{"slug":"/sw_development/setup/mac-os-ant-installation/"},"frontmatter":{"title":"MacOS Apache Ant 설치하기","tags":["MacOS Setup","Java","Ant"],"category":"sw development","subCategory":"setup"}}}},"staticQueryHashes":["2152785458","3427181268"]}