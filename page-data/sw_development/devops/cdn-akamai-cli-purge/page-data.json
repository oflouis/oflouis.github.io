{"componentChunkName":"component---src-templates-post-template-js","path":"/sw_development/devops/cdn-akamai-cli-purge/","result":{"data":{"site":{"siteMetadata":{"title":"Louis","author":"Louis"}},"markdownRemark":{"id":"41504deb-29ad-5fec-84f0-c301418b9cdf","excerpt":"아카마이 CDN을 사용한다면 사이트에 접속해서 퍼지 기능을 이용할 수 있다. 하지만 사이트 접속없이 개발 PC에서 즉시 처리하는 것이 빠르고 수월하다. 본 포스팅은 아카마이 CLI를 사용해서 캐시를 퍼지하는 방법을 이야기한다.\n또한 본 포스팅은 맥에서의 설정과 사용을 다뤘는데, OS가 맥이 아닌 경우는 CLI 설치만 다르고 전체적인 맥락은 동일하기 때문에 다른 내용은 참고 링크를 확인하자.","html":"<p>아카마이 CDN을 사용한다면 사이트에 접속해서 퍼지 기능을 이용할 수 있다. 하지만 사이트 접속없이 개발 PC에서 즉시 처리하는 것이 빠르고 수월하다. 본 포스팅은 아카마이 CLI를 사용해서 캐시를 퍼지하는 방법을 이야기한다.\n또한 본 포스팅은 맥에서의 설정과 사용을 다뤘는데, OS가 맥이 아닌 경우는 CLI 설치만 다르고 전체적인 맥락은 동일하기 때문에 다른 내용은 참고 링크를 확인하자.</p>\n<!-- more -->\n<h1>Akamai CLI &#x26; Purge 설치</h1>\n<hr>\n<p>Akamai CLI와 Purge 기능을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">brew <span class=\"token function\">install</span> akamai\nakamai <span class=\"token function\">install</span> purge</code></pre></div>\n<h1>Authentication Credentials 설정</h1>\n<hr>\n<h2>Akamai API Client 생성</h2>\n<p>아카마이 API를 사용하기 위해 API Client를 생성한다.</p>\n<ul>\n<li>메뉴 : 아카마이 사이트 접속 > Identity and Access Management > User and API Clients > Create API client</li>\n<li>생성 후 credentials 정보(client_secret, host, access_token, client_token)를 복사해둔다. 이 정보는 .edgerc 파일 생성에 사용된다.</li>\n</ul>\n<h2>.edgerc 생성</h2>\n<p>복사해둔 credentials 정보를 사용해 .edgerc 파일을 홈 디렉토리에 생성한다. 참고로 .edgerc 파일은 원하는 위치에 생성해도 괜찮다. 이 파일은 purge 할 때 파라미터로 입력이 가능하기 때문이다.\n섹션은 [default]가 기본값인데 여러 호스트를 관리한다면 다른 이름을 사용해도 좋다.(예 : [foo-service]) 섹션 또한 파라미터로 지정이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> <span class=\"token environment constant\">$HOME</span>\n<span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> .edgerc</span>\n[default]\nclient_secret = \nhost = \naccess_token = \nclient_token = \nEOF</span></code></pre></div>\n<h1>캐시 퍼지하기</h1>\n<hr>\n<h2>파일 조회하기</h2>\n<p>CDN에 파일이 캐시되어 있는지 확인하길 원할 수 있다. 또한 퍼지 후에 파일 캐시가 정상적인지 확인할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">FILE_FULL_URL</span><span class=\"token operator\">=</span>\n<span class=\"token function\">curl</span> -H <span class=\"token string\">\"Pragma: akamai-x-cache-on, akamai-x-cache-remote-on, akamai-x-cache-cacheable, akamai-x-get-cache-key, akamai-x-get-true-cache-key, akamai-x-get-request-id\"</span> <span class=\"token punctuation\">\\</span>\n     -I <span class=\"token variable\">${FILE_FULL_URL}</span></code></pre></div>\n<h2>파일 퍼지하기</h2>\n<ul>\n<li>옵션\n<ul>\n<li>--edgerc : .edgerc 파일의 위치</li>\n<li>--section : section 이름</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">FILE_FULL_URL</span><span class=\"token operator\">=</span>\nakamai purge --edgerc <span class=\"token environment constant\">$HOME</span>/.edgerc --section default invalidate <span class=\"token variable\">${FILE_FULL_URL}</span></code></pre></div>\n<h1>참고</h1>\n<hr>\n<ul>\n<li><a href=\"https://techdocs.akamai.com/developer/docs/about-clis\">https://techdocs.akamai.com/developer/docs/about-clis</a></li>\n<li><a href=\"https://github.com/akamai/cli\">https://github.com/akamai/cli</a></li>\n<li><a href=\"https://github.com/akamai/cli-purge\">https://github.com/akamai/cli-purge</a></li>\n<li><a href=\"https://youtu.be/NNogmZ-5tsg?t=50\">https://youtu.be/NNogmZ-5tsg?t=50</a></li>\n<li><a href=\"https://techdocs.akamai.com/developer/docs/set-up-authentication-credentials\">https://techdocs.akamai.com/developer/docs/set-up-authentication-credentials</a></li>\n</ul>","fields":{"slug":"/sw_development/devops/cdn-akamai-cli-purge/"},"frontmatter":{"title":"Akamai CLI 사용해서 Cache Purge 하기","searchTexts":["how to purge image cache on Akamai CDN","akamai cache purge using cil on macos"],"category":"sw development","subCategory":"devops","tags":["CDN"],"created":"Dec 24, 2022","updated":"Jan 06, 2023"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#akamai-cli--purge-%EC%84%A4%EC%B9%98\">Akamai CLI &#x26; Purge 설치</a></p>\n</li>\n<li>\n<p><a href=\"#authentication-credentials-%EC%84%A4%EC%A0%95\">Authentication Credentials 설정</a></p>\n<ul>\n<li><a href=\"#akamai-api-client-%EC%83%9D%EC%84%B1\">Akamai API Client 생성</a></li>\n<li><a href=\"#edgerc-%EC%83%9D%EC%84%B1\">.edgerc 생성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BA%90%EC%8B%9C-%ED%8D%BC%EC%A7%80%ED%95%98%EA%B8%B0\">캐시 퍼지하기</a></p>\n<ul>\n<li><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0\">파일 조회하기</a></li>\n<li><a href=\"#%ED%8C%8C%EC%9D%BC-%ED%8D%BC%EC%A7%80%ED%95%98%EA%B8%B0\">파일 퍼지하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></p>\n</li>\n</ul>"}},"pageContext":{"slug":"/sw_development/devops/cdn-akamai-cli-purge/","prev":{"fields":{"slug":"/life/economy/nasdaq-2023-holidays/"},"frontmatter":{"title":"2023년 나스닥 휴장일 (Nasdaq Holidays)","tags":["stock"],"category":"life","subCategory":"economy"}},"next":{"fields":{"slug":"/life/economy/tesla-musk-elon-2022/"},"frontmatter":{"title":"2022년 머스크의 테슬라 주식 매도 정리","tags":["stock"],"category":"life","subCategory":"economy"}}}},"staticQueryHashes":["2152785458","3427181268"]}