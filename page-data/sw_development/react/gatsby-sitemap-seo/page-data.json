{"componentChunkName":"component---src-templates-post-template-js","path":"/sw_development/react/gatsby-sitemap-seo/","result":{"data":{"site":{"siteMetadata":{"title":"Louis","author":"Louis"}},"markdownRemark":{"id":"c4a68bd9-ac14-5dbd-8ef6-41e7d2e2e7a2","excerpt":"호스팅 중인 블로그에 더 많은 유저의 유입을 원한다면 사이트맵을 검색 엔진에 등록하자. 유저 유입의 가능성을 높일 수 있다. 개츠비로 작성한 사이트는 플러그인으로 쉽게 사이트맵을 생성할 수 있다.","html":"<p>호스팅 중인 블로그에 더 많은 유저의 유입을 원한다면 사이트맵을 검색 엔진에 등록하자. 유저 유입의 가능성을 높일 수 있다.</p>\n<p>개츠비로 작성한 사이트는 플러그인으로 쉽게 사이트맵을 생성할 수 있다.</p>\n<!-- more -->\n<h1>사이트맵</h1>\n<hr>\n<h2>왜 필요한가</h2>\n<p>구글, 네이버, 야후 등에서 많이 노출되길 원하기 때문이다.\n혹시 다른 사용자의 사이트 방문이 필요없다면 사이트맵은 불필요한 요소이다.</p>\n<h2>사이트맵 이란</h2>\n<p>도메인(사이트)이 포함하고 있는 페이지들의 목록이다. 정확하게는 사이트 내 페이지들의 주소(URL) 목록이고, 사이트의 내용을 검색 엔진에게 제공하는 역할을 한다.</p>\n<p>검색 엔진은 사용자가 검색을 했을 때 그 내용과 가장 적합한 사이트(페이지) 목록을 제공한다.\n우리가 구글에서 검색을 했을 때 보이는 내용들이 바로 이 목록이고 우리는 이 중에 선택(클릭)해서 해당 페이지로 이동한다.</p>\n<p>그렇다면 검색 엔진은 검색어가 입력된 직후에 전세계의 모든 사이트를 뒤져서 엄청난 빠른 시간내에 처리하고 목록을 제공하는 것일까? 당연히 아니다.</p>\n<p>검색 엔진은 여러 알고리즘을 사용해 검색어와 적합한 사이트 분류, 노출 순위 조정 등의 작업을 한다.\n여기에 사용되는 것들 중 하나가 사이트맵이다. 사용자로부터 사이트맵이 등록되면 검색 엔진은 해당 사이트를 더 효율적으로 크롤링 및 분석한다.</p>\n<h2>사이트맵의 내용</h2>\n<p>사이트맵은 기본적으로 주소와 구조를 포함하는데 이 외에도 이미지, 동영상, 뉴스 등을 포함할 수 있다.\n또한 노출이 필요없는 중요하지 않는 페이지가 있다면 사이트맵에서 제외하면 된다.</p>\n<ul>\n<li>사이트맵 샘플</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>urlset</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>http://www.example.com/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>lastmod</span><span class=\"token punctuation\">></span></span>2005-01-01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>lastmod</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>monthly<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>urlset</span><span class=\"token punctuation\">></span></span> </code></pre></div>\n<ul>\n<li>필수 태그 : urlset, url, loc</li>\n<li>선택 태그 : lastmod, changefreq, priority</li>\n<li>규격 링크 : <a href=\"https://www.sitemaps.org/protocol.html\">https://www.sitemaps.org/protocol.html</a></li>\n</ul>\n<h2>참고</h2>\n<p>검색 엔진에 사이트맵을 등록한 것만으로 내 사이트를 모든 내용이 검색 엔진에 노출되고, 드라마틱하게 유저 유입이 증가되지는 않는다.\n검색 엔진의 사이트 노출은 다양한 요소와 많은 알고리즘으로 동작하고 사이트맵 처리에도 여러 예외가 있기 때문이다. 노출을 높일 수 있는 방법을 찾아 지속적으로 관리하는 것이 필요하다.</p>\n<h1>개츠비 사이트맵 적용하기</h1>\n<hr>\n<p>이제 본론인 개츠비 플러그인을 적용해보자.</p>\n<h2>플러그인</h2>\n<ul>\n<li>이름 : gatsby-plugin-sitemap</li>\n<li>링크 : <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/\">https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/</a></li>\n</ul>\n<h2>플러그인 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev gatsby-plugin-sitemap</code></pre></div>\n<h2>플러그인 설정</h2>\n<ul>\n<li>gatsby-config.js 파일을 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// siteMetadata에 siteUrl을 추가. siteUrl 추가를 원하지 않은 경우 사이트맵 플러그인 설정에서 resolveSiteUrl를 사용해도 된다.</span>\n  siteMetadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    siteUrl<span class=\"token operator\">:</span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 사이트맵 플러그인 추가</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token operator\">...</span>\n      <span class=\"token string\">'gatsby-plugin-sitemap'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>사이트맵 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> run build</code></pre></div>\n<h2>사이트맵 확인하기</h2>\n<ul>\n<li>경로 : public/sitemap/sitemap-index.xml</li>\n<li>생성된 사이트맵의 경로를 구글 검색 콘솔에서 등록하면 된다.</li>\n</ul>\n<h2>추가 : 사이트맵에 &#x3C;lastmod> 추가하기</h2>\n<p>위의 설정만으로도 사이트맵은 생성되고 이렇게 생성되는 사이트맵은 &#x3C;loc>, &#x3C;changefreq>, &#x3C;priority> 태그들을 포함한다.\n이 절에서는 플러그인 설정을 수정해서 사이트맵에 &#x3C;lastmod> 태그를 추가하는 것을 해볼 것이다. 기본 예제는 공식사이트의 사이트맵 플러그인 설명에서 제공하고 있다.</p>\n<p>나는 마크다운과 <code class=\"language-text\">gatsby-transformer-remark</code> 플러그인을 사용하고 있기 때문에,\n마크타운에 lastmod에 사용할 값을 추가하고 이를 graphql로 조회해서 사이트맵에 추가하는 작업을 했다.</p>\n<ul>\n<li>마크타운 파일</li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token front-matter-block\"><span class=\"token punctuation\">---</span>\n<span class=\"token font-matter yaml language-yaml\"><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 테스트 페이지\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">lastmod</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-09-10</span></span></span><span class=\"token punctuation\">---</span></span>\n...</code></pre></div>\n<ul>\n<li>플러그인 설정 (gatsby-config.js)</li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-plugin-sitemap'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        query<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span>\n<span class=\"token string\">          {</span>\n<span class=\"token string\">            site {</span>\n<span class=\"token string\">              siteMetadata {</span>\n<span class=\"token string\">                siteUrl</span>\n<span class=\"token string\">              }</span>\n<span class=\"token string\">            }  </span>\n<span class=\"token string\">            allMarkdownRemark {</span>\n<span class=\"token string\">              nodes {</span>\n<span class=\"token string\">                fields {</span>\n<span class=\"token string\">                  slug</span>\n<span class=\"token string\">                }</span>\n<span class=\"token string\">                frontmatter {</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token string\">                  lastmod</span></span><span class=\"token string\">                }</span>\n<span class=\"token string\">              }</span>\n<span class=\"token string\">            }</span>\n<span class=\"token string\">          }</span>\n<span class=\"token string\">        </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">resolveSiteUrl</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">resolvePages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> allMarkdownRemark<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> nodes<span class=\"token operator\">:</span> allMarkdownPages <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> pages <span class=\"token operator\">=</span> allMarkdownPages<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n              path<span class=\"token operator\">:</span> page<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">              modified<span class=\"token operator\">:</span> page<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>lastmod<span class=\"token punctuation\">,</span></span>            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>pages<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">serialize</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">,</span> modified <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            url<span class=\"token operator\">:</span> path<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            lastmod<span class=\"token operator\">:</span> modified<span class=\"token punctuation\">,</span></span>            changefreq<span class=\"token operator\">:</span> <span class=\"token string\">'daily'</span><span class=\"token punctuation\">,</span>\n            priority<span class=\"token operator\">:</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>결과 (sitemap 내용 일부)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>urlset</span>\n\t<span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>news</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-news/0.9<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xhtml</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>image</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-image/1.1<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>video</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-video/1.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://www.example.com/test/01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>lastmod</span><span class=\"token punctuation\">></span></span>2022-09-10T00:00:00.000Z<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>lastmod</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>urlset</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1>참고</h1>\n<hr>\n<ul>\n<li><a href=\"https://www.sitemaps.org/protocol.html\">https://www.sitemaps.org/protocol.html</a></li>\n<li><a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/\">https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/</a></li>\n<li><a href=\"https://developers.google.com/search/docs/advanced/sitemaps/overview?hl=en\">https://developers.google.com/search/docs/advanced/sitemaps/overview?hl=en</a></li>\n<li><a href=\"https://www.joshwcomeau.com/gatsby/seo-friendly-sitemap/\">https://www.joshwcomeau.com/gatsby/seo-friendly-sitemap/</a></li>\n</ul>","fields":{"slug":"/sw_development/react/gatsby-sitemap-seo/"},"frontmatter":{"title":"개츠비(Gatsby) 사이트맵 적용하기","searchTexts":["How to generate sitemap for your gatsby site","개츠비 블로그 사이트맵 생성하기","사이트맵에 lastmod 추가하기"],"category":"sw development","subCategory":"react","tags":["Sitemap","SEO","Gatsby"],"created":"Sep 10, 2022","updated":"Oct 15, 2022"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5\">사이트맵</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%9C%EA%B0%80\">왜 필요한가</a></li>\n<li><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5-%EC%9D%B4%EB%9E%80\">사이트맵 이란</a></li>\n<li><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5%EC%9D%98-%EB%82%B4%EC%9A%A9\">사이트맵의 내용</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%B8%A0%EB%B9%84-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">개츠비 사이트맵 적용하기</a></p>\n<ul>\n<li><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8\">플러그인</a></li>\n<li><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98\">플러그인 설치</a></li>\n<li><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%A0%95\">플러그인 설정</a></li>\n<li><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5-%EC%83%9D%EC%84%B1\">사이트맵 생성</a></li>\n<li><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">사이트맵 확인하기</a></li>\n<li><a href=\"#%EC%B6%94%EA%B0%80--%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5%EC%97%90-lastmod-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">추가 : 사이트맵에 &#x3C;lastmod> 추가하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-1\">참고</a></p>\n</li>\n</ul>"}},"pageContext":{"slug":"/sw_development/react/gatsby-sitemap-seo/","prev":{"fields":{"slug":"/sw_development/devops/aws-eks-application-logging-01/"},"frontmatter":{"title":"AWS EKS 애플리케이션 로그 수집하기 (1)","tags":["AWS","Kubernetes","K8S","OpenSearch","Logging","EKS","EFK"],"category":"sw development","subCategory":"devops"}},"next":{"fields":{"slug":"/sw_engineering/blockchain/smart-contract/"},"frontmatter":{"title":"블록체인 스마트 컨트랙트 (Smart Contract)","tags":["blockchain","smart contract"],"category":"sw engineering","subCategory":"blockchain"}}}},"staticQueryHashes":["2152785458","3427181268"]}